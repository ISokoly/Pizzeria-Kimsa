<div class="admin-panel">

  <!-- Lista de categor√≠as con im√°genes -->
  <div class="products-container">
    <h2 class="title">Productos de la pizzer√≠a</h2>

    <div class="products-grid">
      <div class="product-item" *ngFor="let categoria of categorias">
        <h3 class="category-name" (click)="verProductos(categoria.nombre)" style="cursor: pointer;">
          {{ categoria.nombre }}
        </h3>
        @if (categoria.imagen) {
          <img 
            [src]="categoria.imagen" 
            width="300" 
            class="preview-img" 
            (click)="verProductos(categoria.nombre)"
            style="cursor: pointer;"
          >
        }
        <div class="actions">
          <button (click)="editCategoria(categoria)" class="edit-btn">Editar</button>
          <button (click)="deleteCategoria(categoria.id)" class="delete-btn">Eliminar</button>
        </div>
      </div>
    </div>
  </div>
</div>
  <button class="create-btn" (click)="abrirFormulario()">Crear Nueva Categor√≠a</button>

  <!-- üìå Formulario modal solo aparece cuando `mostrarFormulario` es true -->
  <div *ngIf="mostrarFormulario" class="overlay" (click)="cerrarFormulario()"></div>
  
  <div *ngIf="mostrarFormulario" class="form-modal">
  <div class="form-container">
    <h2 class="form-title">
      {{ selectedCategoria ? 'Editar Categor√≠a' : 'Crear Categor√≠a' }}
    </h2>
  
    <form (ngSubmit)="saveCategoria()" class="form">
      <input 
        type="text" 
        [(ngModel)]="formData.nombre" 
        name="nombre" 
        placeholder="Nombre de la categor√≠a" 
        required
        class="form-input"
      >
  
      <textarea 
        [(ngModel)]="formData.descripcion" 
        name="descripcion" 
        placeholder="Descripci√≥n" 
        required
        class="form-input"
      ></textarea>
  
      <div class="price-container">
        <label for="imagen" class="label-text">Imagen:</label>
        <input 
          type="file" 
          (change)="onFileSelected($event)"
          accept="image/*"
          class="form-input"
        >    
      </div>
  
      <button type="submit" class="submit-btn">
        {{ selectedCategoria ? 'Actualizar' : 'Crear' }}
      </button>
  
      <button 
        *ngIf="selectedCategoria" 
        type="button" 
        (click)="cancelEditCategoria()" 
        class="cancel-btn"
      >
        Cancelar
      </button>
  
      <p *ngIf="!selectedCategoria">No hay categor√≠a seleccionada.</p>
    </form>
  </div>
  
  </div>
<router-outlet></router-outlet>
